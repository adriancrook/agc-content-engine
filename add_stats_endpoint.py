[[], {"agent": "task.type", "model": "task.worker_id or", "qwen2.5": 14, "modelType": "model_type", "duration": "str(task.completed_at - task.started_at) if task.started_at and task.completed_at else", "status": "task.status", "cost": 0.0}, {"local": 0.0, "cloud": 0.0}, {"research": {"local": 0.0, "cloud": 0.05}, "writer": {"local": 0.0, "cloud": 0.08}, "fact_check": {"local": 0.0, "cloud": 0.05}, "seo": {"local": 0.0, "cloud": 0.05}, "topic_discovery": {"local": 0.0, "cloud": 0.1}, "humanize": {"local": 0.1, "cloud": 0.2}}, ["agent]:\n            cost = base_costs[agent][model_type]\n            total_cost += cost\n            cost_by_model[model_type] = cost_by_model.get(model_type, 0.0) + cost\n    \n    # Count pending articles\n    from shared.database import count_topics_by_status\n    pending_count = sum(count_topics_by_status().values())\n    \n    return jsonify({\n        \"pendingArticles", "pending_count,\n        \"agentRuns", "agent_runs,\n        \"local", "local_count,\n        \"cloud", "cloud_count,\n        \"totalCost", "round(total_cost, 2),\n        \"costByModel", "cost_by_model\n    })\n'''\n\n# Read current app.py\nwith open('web/app.py', 'r') as f:\n    app_content = f.read()\n\n# Find the if __name__ == \"__main__\" line and insert before it\nif '__name__ == \"__main__\"' in app_content:\n    app_content = app_content.replace(\n        '__name__ == \"__main__", ",\n        '__name__ == \"__main__\"' + stats_endpoint\n    )\nelse:\n    app_content += stats_endpoint\n\n# Write back\nwith open('web/app.py", "w", "as f:\n    f.write(app_content)\n\nprint(\"\u2705 Stats endpoint added to web/app.py"]]